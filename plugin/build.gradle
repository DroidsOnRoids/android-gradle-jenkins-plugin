plugins {
	id 'com.gradle.plugin-publish' version '0.9.6'
	id 'maven-publish'
	id 'jacoco'
	id 'java-gradle-plugin'
	id 'groovy'
}

dependencies {
	compile 'org.codehaus.groovy:groovy:2.4.7'
	compile 'com.android.tools.build:gradle:2.2.2'
	testCompile 'junit:junit:4.12'
	testCompile 'org.assertj:assertj-core:3.5.2'
	testCompile 'org.mockito:mockito-core:2.2.11'
}

group = GROUP
version = VERSION_NAME

pluginBundle {
	website = POM_URL
	vcsUrl = POM_SCM_URL
	description = POM_DESCRIPTION
	tags = ['jenkins', 'android', 'ci']

	plugins {
		jenkinsPlugin {
			id = 'pl.droidsonroids.jenkins'
			displayName = POM_NAME
			description = POM_DESCRIPTION
		}
	}
}

publishing {
	repositories {
		mavenLocal()
	}
	publications {
		mavenJava(MavenPublication) {
			from components.java
		}
	}
}

jacocoTestReport {
	reports {
		xml.enabled true
		csv.enabled false
		html.enabled true
	}
}

task copyTestResources(type: Copy) {
	from "${projectDir}/src/test/resources"
	into "${buildDir}/classes/test"
}